.TH "COCOMA" "1" "April 22, 2013" "1" "COCOMA"
.SH NAME
COCOMA \- man page
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.\" Man page generated from reStructuredText.
.
.SH CONTROLLED CONTENTIOUS AND MALICIOUS FRAMEWORK
.sp
The aim of COCOMA framework is to create, monitor and control contentious and malicious system workload. By using this framework experimenters are able to create operational conditions under which tests and experiments can be carried out. This allows more insight into the testing process so that various scenarios of the cloud infrastructure behaviour can be analysed by collecting and correlate metrics of the emulated environment with the test results.
.sp
COCOMA is provided by BonFIRE as a service within a VM already configured that can be added to an experiment and used.
.SH CONTENTS
.SS Introduction
.sp
In order to use COCOMA, an experimenter defines an \fIemulation\fP which embeds all environment operational conditions as shown in the figure below. The actual operational conditions are defined in what are called \fIdistributions\fP, which create specific workloads over the targeted resource of a specific resource type. For example, \fIdistribution 1\fP targets the CPU creating an exponential trend over a specific time range within the whole emulation. Each distribution time is divided into multiple time\-slots based on the distribution granularity then broken down into multiple runs each one injecting a different load level per time slot, which depends on the discrete function of the distribution.
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.INDENT 2.5
[image]
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.SS Getting Started
.sp
COCOMA is installed in \fI"/usr/share/pyshared/cocoma"\fP. In this section we provide information about the components that have to be running in order to fully use the framework, and how can a user interact with it.
.SS Starting Components
.sp
The two main components of COCOMA are:
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Scheduler daemon (mandatory, needs to be the first started)
.IP \(bu 2
API Daemon (optional, if the REST API functionality is required)
.UNINDENT
.UNINDENT
.UNINDENT
.sp
The \fBScheduler daemon\fP \- runs in the background and executes workload with differential parameters at the time defined in the emulation properties.
To check if the scheduler is running use the following:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ ccmsh \-\-show scheduler
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To start the scheduler on a specific network interface and port, use the command:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ ccmsh \-\-start scheduler eth1 55555
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
If the network interface and port are omitted, the default values are respectively \fIeth0\fP adn \fI51889\fP
.sp
If more detailed output information is needed, the \fIScheduler\fP can also be started in \fIDEBUG\fP mode:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ ccmsh \-\-start scheduler eth1 55555 debug
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The \fBAPI daemon\fP \- provides the RESTfull web API, which exposes COCOMA resources to be used over the network. It follows the same command structure as the Scheduler.
To check if the scheduler is running use the following:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ ccmsh \-\-show api
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To start the api on a specific network interface and port, use the command:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ ccmsh \-\-start api eth2 77777
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
If the network interface and port are omitted, the default values are respectively \fIeth0\fP and \fI5050\fP
.sp
The log level is the same specified for the \fIScheduler\fP.
.SS CLI
.sp
The COCOMA CLI is called \fIccmsh\fP, and provides the following options:
.INDENT 0.0
.TP
.B \-h, \-\-help
Display help information of the available options
.UNINDENT
.INDENT 0.0
.TP
.B \-v, \-\-version
Display installed version information of COCOMA
.UNINDENT
.INDENT 0.0
.TP
.B \-l, \-\-list <emulation name>
Display list of all emulations that are scheduled or already finished. If emulation name is provided then it lists information for that specific emulation
.UNINDENT
.INDENT 0.0
.TP
.B \-r, \-\-results <emulation name>
Display list of results of all emulations that are scheduled or already finished. If emulation name is provided, then it lists information for that specific emulation
.UNINDENT
.INDENT 0.0
.TP
.B \-j, \-\-list\-jobs
Queries the scheduler for the list of jobs that have to be executed. For each one, it gives the job name and the planned execution time
.UNINDENT
.INDENT 0.0
.TP
.B \-i, \-\-dist <distribution name>
Scans the \fI"/usr/share/pyshared/cocoma/distributions"\fP folder and displays all available distribution modules. If a distribution name is provided, then it shows the help information for that specific distribution
.UNINDENT
.INDENT 0.0
.TP
.B \-e, \-\-emu <emulator name>
Scans the \fI"/usr/share/pyshared/cocoma/emulators"\fP folder and displays all available emulator wrapper modules. If an emulator name is provided, then it shows the help information for that specific emulator wrapper
.UNINDENT
.INDENT 0.0
.TP
.B \-x, \-\-xml <file name>
It create and emulation based on the local XML
.UNINDENT
.INDENT 0.0
.TP
.B \-n, \-\-now (used with \-x option only)
Override any start date in the local XML emulation file without modifying the file, i.e. \fBccmsh \-x <file name> \-n\fP
.UNINDENT
.INDENT 0.0
.TP
.B \-d, \-\-delete <emulation name>
Deletes a specific emulation from the database
.UNINDENT
.INDENT 0.0
.TP
.B \-p, \-\-purge
Remove all DB entries, all scheduled jobs
.UNINDENT
.INDENT 0.0
.TP
.B \-\-start <api interface port>, <scheduler interface port>
Start Scheduler or API daemon by specifying network interface and port number i.e. \fBccmsh \-\-start api eth0 2020\fP or \fBccmsh \-\-start scheduler eth0 3030\fP. By default if the network interface is not specified, the Scheduler daemon will run on \fIeth0\fP and \fI51889\fP, and the API daemon will run on \fIeth0\fP and \fI5050\fP.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-stop <api>, <scheduler>
Stop Scheduler or API daemon
.UNINDENT
.INDENT 0.0
.TP
.B \-\-show <api>, <scheduler>
Show OS information on Scheduler or API daemon, displays PID numbers
.UNINDENT
.SS REST API
.SS Index
.sp
The API URIs summary list is as follow:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
* /
* /emulations
* /emulations/{name}
* /distributions
* /distributions/{name}
* /emulators
* /emulators/{name}
* /results
* /results/{name}
* /tests
* /tests/{name}
* /logs
* /logs/system
* /logs/emulations
* /logs/emulations/{name}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Description
.sp
\fBhttp:method:: GET /\fP
.INDENT 0.0
.INDENT 3.5
The \fBroot\fP returns a \fIcollection\fP of all the available resources. Example of a XML response:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<root href="/">
        <version>0.1.1</version>
        <timestamp>1365518303.44</timestamp>
        <link href="/emulations" rel="emulations" type="application/vnd.bonfire+xml"/>
        <link href="/emulators" rel="emulators" type="application/vnd.bonfire+xml"/>
        <link href="/distributions" rel="distributions" type="application/vnd.bonfire+xml"/>
        <link href="/tests" rel="tests" type="application/vnd.bonfire+xml"/>
        <link href="/results" rel="results" type="application/vnd.bonfire+xml"/>
        <link href="/logs" rel="logs" type="application/vnd.bonfire+xml"/>
</root>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /emulations\fP
.INDENT 0.0
.INDENT 3.5
The \fBemulations\fP returns a \fIcollection\fP of all the available emulation resources. Example of a XML response:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<collection href="/emulations" xmlns="http://127.0.0.1/cocoma">
        <items offset="0" total="3">
                <emulation href="/emulations/1\-Emu\-CPU\-RAM\-IO" id="1" name="1\-Emu\-CPU\-RAM\-IO" state="inactive"/>
                <emulation href="/emulations/2\-CPU_EMU" id="2" name="2\-CPU_EMU" state="inactive"/>
                <emulation href="/emulations/3\-CPU_EMU" id="3" name="3\-CPU_EMU" state="inactive"/>
        </items>
        <link href="/" rel="parent" type="application/vnd.bonfire+xml"/>
</collection>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /emulations/{name}\fP
.INDENT 0.0
.INDENT 3.5
Displays information about emulation by name. The returned \fI200\-OK\fP XML is:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<emulation href="/emulations/1\-Emu\-CPU\-RAM\-IO" xmlns="http://127.0.0.1/cocoma">
        <id>1</id>
        <emulationName>1\-Emu\-CPU\-RAM\-IO</emulationName>
        <emulationType>mix</emulationType>
        <resourceType>mix</resourceType>
        <emuStartTime>2013\-04\-09T13:00:01</emuStartTime>
        <emuStopTime>180</emuStopTime>
        <scheduledJobs>
                <jobsempty>No jobs are scheduled</jobsempty>
        </scheduledJobs>
        <distributions ID="1" name="Distro1">
                <startTime>5</startTime>
                <granularity>3</granularity>
                <duration>30</duration>
                <startload>10</startload>
                <stopload>90</stopload>
        </distributions>
        <distributions ID="2" name="Distro2">
                <startTime>5</startTime>
                <granularity>3</granularity>
                <duration>30</duration>
                <startload>10</startload>
                <stopload>90</stopload>
        </distributions>
        <link href="/" rel="parent" type="application/vnd.bonfire+xml"/>
        <link href="/emulations" rel="parent" type="application/vnd.bonfire+xml"/>
</emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The returned \fI404 – Not Found\fP XML is:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<error>Emulation Name: 1\-Emu\-CPU\-RAM\-IO1 not found. Error:too many values to unpack</error>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: POST /emulations\fP
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
:param string XML: Emulation parameters defined via XML as shown in the examples section.
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The returned \fI201\-Created\fP XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<emulation href="/emulations/4\-CPU_EMU" xmlns="http://127.0.0.1/cocoma">
        <ID>4\-CPU_EMU</ID>
        <EmuNotes>OK</EmuNotes>
        <DistroNotes>OK</DistroNotes>
        <link href="/" rel="parent" type="application/vnd.bonfire+xml"/>
        <link href="/emulations" rel="parent" type="application/vnd.bonfire+xml"/>
</emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The returned \fI400 – Bad Request\fP XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<error>XML is not well formed Error: syntax error: line 1, column 0</error>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /emulators\fP
.INDENT 0.0
.INDENT 3.5
Displays emulators list. The returned \fI200\- OK\fP XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<collection href="/emulators" xmlns="http://127.0.0.1/cocoma">
        <items offset="0" total="3">
                <emulator href="/emulators/lookbusy" name="lookbusy"/>
                <emulator href="/emulators/stressapptest" name="stressapptest"/>
                <emulator href="/emulators/iperf" name="iperf"/>
        </items>
        <link href="/" rel="parent" type="application/vnd.bonfire+xml"/>
</collection>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /emulators/{name}\fP
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
:arg name: Name of emulator that you want to get more info
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Displays information about emulator by name. The returned \fI200\- OK\fP XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<emulator href="/emulator/lookbusy" xmlns="http://127.0.0.1/cocoma">
        <info>
                Emulator lookbusy can be used for following resources:
                1)Loads CPU with parameters:
                ncpus \- Number of CPUs to keep busy (default: autodetected)

                2)Loads Memory(MEM) with parameters:
                memSleep \- Time to sleep between iterations, in usec (default 1000)

                3)Changing size of files to use during IO with parameters:
                ioBlockSize \- Size of blocks to use for I/O in MB
                ioSleep \- Time to sleep between iterations, in msec (default 100)


                XML block example:
                &lt;emulator\-params&gt;
                &lt;resourceType&gt;CPU&lt;/resourceType&gt;
                &lt;ncpus&gt;0&lt;/ncpus&gt;
                &lt;/emulator\-params&gt;

        </info>
        <link href="/" rel="parent" type="application/vnd.bonfire+xml"/>
        <link href="/emulators" rel="parent" type="application/vnd.bonfire+xml"/>
</emulator>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /distributions\fP
.INDENT 0.0
.INDENT 3.5
Displays distributions list. The returned \fI200\- OK\fP XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<collection href="/distributions" xmlns="http://127.0.0.1/cocoma">
        <items offset="0" total="3">
                <distribution href="/distributions/linear" name="linear"/>
                <distribution href="/distributions/linear_incr" name="linear_incr"/>
                <distribution href="/distributions/trapezoidal" name="trapezoidal"/>
        </items>
        <link href="/" rel="parent" type="application/vnd.bonfire+xml"/>
</collection>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /distributions/{name}\fP
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
:arg name: Name of distributions that you want to get more info
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Displays information about distributions by name. The returned \fI200\- OK\fP XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<distribution href="/distributions/linear" xmlns="http://127.0.0.1/cocoma">
        <info>Linear distribution takes in start and stop load parameters and gradually increasing resource workload. Can be used with CPU,MEM,IO,NET resource types.</info>
        <link href="/" rel="parent" type="application/vnd.bonfire+xml"/>
        <link href="/distributions" rel="parent" type="application/vnd.bonfire+xml"/>
</distribution>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /tests\fP
.INDENT 0.0
.INDENT 3.5
Displays tests list. The returned \fI200\- OK\fP XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<collection href="/tests" xmlns="http://127.0.0.1/cocoma">
        <items offset="0" total="20">
                <test href="/tests/01\-CPU\-Linear\-Lookbusy_10\-95.xml" name="01\-CPU\-Linear\-Lookbusy_10\-95.xml"/>
                <test href="/tests/03\-NET\-Linear_incr\-Iperf\-100\-1000.xml" name="03\-NET\-Linear_incr\-Iperf\-100\-1000.xml"/>
                <test href="/tests/02\-IO\-Linear\-Stressapptest_1\-10.xml" name="02\-IO\-Linear\-Stressapptest_1\-10.xml"/>
                <test href="/tests/02\-IO\-Linear_incr\-Stressapptest_1\-10.xml" name="02\-IO\-Linear_incr\-Stressapptest_1\-10.xml"/>
                <test href="/tests/02\-MEM\-Linear_incr\-Stressapptest_100\-1000.xml" name="02\-MEM\-Linear_incr\-Stressapptest_100\-1000.xml"/>
                <test href="/tests/01\-CPU\-Trapezoidal\-Lookbusy_10\-95.xml" name="01\-CPU\-Trapezoidal\-Lookbusy_10\-95.xml"/>
                <test href="/tests/01\-IO\-Trapezoidal\-Lookbusy_1\-10.xml" name="01\-IO\-Trapezoidal\-Lookbusy_1\-10.xml"/>
                <test href="/tests/01\-NET_TEST.xml" name="01\-NET_TEST.xml"/>
                <test href="/tests/03\-MEM\-500\-1000MB\-overlap.xml" name="03\-MEM\-500\-1000MB\-overlap.xml"/>
                <test href="/tests/01\-CPU\-Linear_incr\-Lookbusy_10\-95.xml" name="01\-CPU\-Linear_incr\-Lookbusy_10\-95.xml"/>
                <test href="/tests/01\-IO\-Linear_incr\-Lookbusy_1\-10.xml" name="01\-IO\-Linear_incr\-Lookbusy_1\-10.xml"/>
                <test href="/tests/02\-IO\-Trapezoidal\-Stressapptest_1\-10.xml" name="02\-IO\-Trapezoidal\-Stressapptest_1\-10.xml"/>
                <test href="/tests/03\-CPU\-opposite.xml" name="03\-CPU\-opposite.xml"/>
                <test href="/tests/01\-MEM\-Linear_incr\-Lookbusy_100\-1000.xml" name="01\-MEM\-Linear_incr\-Lookbusy_100\-1000.xml"/>
                <test href="/tests/03\-MEM\-500\-1000MB.xml" name="03\-MEM\-500\-1000MB.xml"/>
                <test href="/tests/03\-MEM\-Linear\-Stressapptest_500\-1000MB.xml" name="03\-MEM\-Linear\-Stressapptest_500\-1000MB.xml"/>
                <test href="/tests/01\-MEM\-Trapezoidal\-Lookbusy_100\-1000.xml" name="01\-MEM\-Trapezoidal\-Lookbusy_100\-1000.xml"/>
                <test href="/tests/02\-MEM\-Trapezoidal\-Stressapptest_100\-1000.xml" name="02\-MEM\-Trapezoidal\-Stressapptest_100\-1000.xml"/>
                <test href="/tests/03\-NET\-Trapezoidal\-Iperf\-100\-1000.xml" name="03\-NET\-Trapezoidal\-Iperf\-100\-1000.xml"/>
                <test href="/tests/01\-IO\-Linear\-Lookbusy_1\-10.xml" name="01\-IO\-Linear\-Lookbusy_1\-10.xml"/>
        </items>
        <link href="/" rel="parent" type="application/vnd.bonfire+xml"/>
</collection>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /tests/{name}\fP
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
:arg name: Name of tests that you want to get more info
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Displays Content of XML file.
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: POST /tests\fP
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
:param string: name of the test that is located on COCOMA machine
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Create emulation from available tests. The returned \fI201\- Created\fP XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<test href="/tests/5\-CPU_EMU" xmlns="http://127.0.0.1/cocoma">
        <emulationName>5\-CPU_EMU</emulationName>
        <startTime>2013\-04\-09T18:57:32</startTime>
        <durationSec>60</durationSec>
</test>
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The returned \fI400\- Not Found\fP reply XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<error>error message</error>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /results\fP
.INDENT 0.0
.INDENT 3.5
Displays results list. The returned \fI200\- OK\fP XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<collection href="/results" xmlns="http://127.0.0.1/cocoma">
        <items offset="0" total="5">
                <results failedRuns="0" href="/results/1\-Emu\-CPU\-RAM\-IO" name="1\-Emu\-CPU\-RAM\-IO" state="inactive"/>
                <results failedRuns="0" href="/results/2\-CPU_EMU" name="2\-CPU_EMU" state="inactive"/>
                <results failedRuns="0" href="/results/3\-CPU_EMU" name="3\-CPU_EMU" state="inactive"/>
                <results failedRuns="0" href="/results/4\-CPU_EMU" name="4\-CPU_EMU" state="inactive"/>
                <results failedRuns="0" href="/results/5\-CPU_EMU" name="5\-CPU_EMU" state="inactive"/>
        </items>
        <link href="/" rel="parent" type="application/vnd.bonfire+xml"/>
</collection>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /results/{name}\fP
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
:arg name: Name of tests that you want to get more info
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Displays information about results by name. The returned \fI200\- OK\fP XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<results href="/results/1\-Emu\-CPU\-RAM\-IO" xmlns="http://127.0.0.1/cocoma">
        <emulationName>1\-Emu\-CPU\-RAM\-IO</emulationName>
        <totalRuns>6</totalRuns>
        <executedRuns>6</executedRuns>
        <failedRuns>0</failedRuns>
        <emuState>inactive</emuState>
</results>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /logs\fP
.INDENT 0.0
.INDENT 3.5
Displays logs list. The returned \fI200\- OK\fP XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<logs href="/logs">
        <link href="/logs/emulations" rel="emulations" type="application/vnd.bonfire+xml"/>
        <link href="/logs/system" rel="system" type="application/vnd.bonfire+xml"/>
</logs>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /logs/system\fP
.INDENT 0.0
.INDENT 3.5
Return Zip file with system logs.
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /logs/emulations\fP
.INDENT 0.0
.INDENT 3.5
Displays emulations logs list. The returned \fI200\- OK\fP XML:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<?xml version="1.0" ?>
<collection href="/logs/emulations" xmlns="http://127.0.0.1/cocoma">
        <items offset="0" total="3">
                <emulationLog href="/logs/emulations/3\-CPU_EMU" name="3\-CPU_EMU"/>
                <emulationLog href="/logs/emulations/5\-CPU_EMU" name="5\-CPU_EMU"/>
                <emulationLog href="/logs/emulations/4\-CPU_EMU" name="4\-CPU_EMU"/>
        </items>
        <link href="/" rel="parent" type="application/vnd.bonfire+xml"/>
        <link href="/logs" rel="parent" type="application/vnd.bonfire+xml"/>
</collection>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBhttp:method:: GET /logs/{name}\fP
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
:arg name: Name of emulation logs that you want to get
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Return Zip file with emulation logs.
.UNINDENT
.UNINDENT
.SS XML payload structure
.sp
A COCOMA emulation is specified in XML. The user can directly create the XML and send it to COCOMA through the CLI client or any REST client. An Emulation must contain all the neccessary information about starting time, duration, target resource and required resource usage. Once the XML document is received by COCOMA, the framework automatically schedules and executes the required workload on the chosen resource(s), CPU, IO, Memory or Network.
.sp
Consider this sample XML document code:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<emulation>
  <emuname>CPU_EMU</emuname>
  <emuType>Mix</emuType>
  <emuresourceType>CPU</emuresourceType>
  <!\-\-date format: 2014\-10\-10T10:10:10 \-\->
  <emustartTime>now</emustartTime>
  <!\-\-duration in seconds \-\->
  <emustopTime>60</emustopTime>

  <distributions>

   <name>CPU_Distro</name>
     <startTime>0</startTime>
     <!\-\-duration in seconds \-\->
     <duration>60</duration>
     <granularity>20</granularity>
     <distribution href="/distributions/linear" name="linear" />
     <!\-\-cpu utilization distribution range\-\->
      <startLoad>10</startLoad>
      <stopLoad>95</stopLoad>

      <emulator href="/emulators/lookbusy" name="lookbusy" />
      <emulator\-params>
        <!\-\-more parameters will be added \-\->
        <resourceType>CPU</resourceType>
       <!\-\-Number of CPUs to keep busy (default: autodetected)\-\->
       <ncpus>0</ncpus>
      </emulator\-params>

  </distributions>

  <log>
   <!\-\- Use value "1" to enable logging(by default logging is off)  \-\->
   <enable>1</enable>
   <!\-\- Use seconds for setting probe intervals(if logging is enabled default is 3sec)  \-\->
   <frequency>1</frequency>
   <logLevel>debug</logLevel>
  </log>

</emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The XML document defines the emulation experiment details, which consists of three blocks:
.INDENT 0.0
.IP \(bu 2
\fBEmulation\fP
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<emulation>
  <emuname>CPU_EMU</emuname>
  <emuType>Mix</emuType>
  <emuresourceType>CPU</emuresourceType>
  <!\-\-date format: 2014\-10\-10T10:10:10 \-\->
  <emustartTime>now</emustartTime>
  <!\-\-duration in seconds \-\->
  <emustopTime>60</emustopTime>
  ...
</emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.INDENT 0.0
.IP \(bu 2
\fBDistribution\fP
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
  <distributions>

   <name>CPU_Distro</name>
     <startTime>0</startTime>
     <!\-\-duration in seconds \-\->
     <duration>60</duration>
     <granularity>20</granularity>
     <distribution href="/distributions/linear" name="linear" />
     <!\-\-cpu utilization distribution range\-\->
      <startLoad>10</startLoad>
      <stopLoad>95</stopLoad>

      <emulator href="/emulators/lookbusy" name="lookbusy" />
      <emulator\-params>
        <!\-\-more parameters will be added \-\->
        <resourceType>CPU</resourceType>
       <!\-\-Number of CPUs to keep busy (default: autodetected)\-\->
       <ncpus>0</ncpus>
      </emulator\-params>

  </distributions>
.ft P
.fi
.UNINDENT
.UNINDENT
.INDENT 0.0
.IP \(bu 2
\fBLog\fP (optional)
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
  <log>
   <!\-\- Use value "1" to enable logging(by default logging is off)  \-\->
   <enable>1</enable>
   <!\-\- Use seconds for setting probe intervals(if logging is enabled default is 3sec)  \-\->
   <frequency>1</frequency>
   <logLevel>debug</logLevel>
  </log>
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
In plain english it means \- create an emulation named \fICPU_EMU\fP starting \fInow\fP and running for \fI60\fP sec. The Emulation includes one distribution called \fICPU_Distro\fP, which starts at the same time as emulation, runs for \fI60\fP sec, using \fIlinear\fP pattern. The pattern increases the workload of the \fICPU\fP from \fI10%\fP to \fI95%\fP in \fI20\fP steps by using the \fIlookbusy\fP emulator. The workload produced by the application is logged every second with debug level information.
.SS Creating Emulation via CLI
.sp
To create an emulation via CLI, a local XML \fBemulation.xml\fP file as the following can be used:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
   <emulation>
     <emuname>CPU_Emulation</emuname>
     <emuType>Mix</emuType>
     <emuresourceType>Mix</emuresourceType>
     <emustartTime>now</emustartTime>
     <!\-\-duration in seconds \-\->
     <emustopTime>180</emustopTime>

     <distributions>
        <name>Distro1</name>
        <startTime>5</startTime>
        <!\-\-duration in seconds \-\->
        <duration>30</duration>
        <granularity>3</granularity>
        <distribution href="/distributions/linear" name="linear" />
      <!\-\-cpu utilization distribution range\-\->
         <startLoad>90</startLoad>
         <stopLoad>10</stopLoad>
         <emulator href="/emulators/lookbusy" name="lookbusy" />
         <emulator\-params>
           <!\-\-more parameters will be added \-\->
           <resourceType>CPU</resourceType>
      <!\-\-Number of CPUs to keep busy (default: autodetected)\-\->
      <ncpus>0</ncpus>

         </emulator\-params>
     </distributions>

      <distributions>
        <name>Distro2</name>
        <startTime>5</startTime>
        <!\-\-duration in seconds \-\->
        <duration>30</duration>
        <granularity>3</granularity>
        <distribution href="/distributions/linear" name="linear" />
      <!\-\-cpu utilization distribution range\-\->
         <startLoad>10</startLoad>
         <stopLoad>90</stopLoad>
         <emulator href="/emulators/lookbusy" name="lookbusy" />
         <emulator\-params>
           <!\-\-more parameters will be added \-\->
           <resourceType>CPU</resourceType>
      <!\-\-Number of CPUs to keep busy (default: autodetected)\-\->
      <ncpus>0</ncpus>

         </emulator\-params>
     </distributions>

     <log>
      <!\-\- Use value "1" to enable logging(by default logging is off)  \-\->
      <enable>1</enable>
      <!\-\- Use seconds for setting probe intervals(if logging is enabled default is 3sec)  \-\->
      <frequency>3</frequency>
     </log>

   </emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The comman to start the emulation via CLI is:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ ccmsh \-x emulation.xml
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Once sent, the list of scheduled jobs is shown on screen as follow:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ ccmsh \-x emulation.xml
INFO:XML Parser:Finished running
INFO:Distriburion Manager:Scheduler reply: 6\-CPU_Emulation\-7\-0\-Distro1\-lookbusy\-cpu: 90 Duration: 10.0sec.Start Time: 2013\-04\-10 09:43:01 End Time: 09:43:11
INFO:Distriburion Manager:Scheduler reply: 6\-CPU_Emulation\-7\-1\-Distro1\-lookbusy\-cpu: 50 Duration: 10.0sec.Start Time: 2013\-04\-10 09:43:13 End Time: 09:43:23
INFO:Distriburion Manager:Scheduler reply: 6\-CPU_Emulation\-7\-2\-Distro1\-lookbusy\-cpu: 10 Duration: 10.0sec.Start Time: 2013\-04\-10 09:43:25 End Time: 09:43:35
INFO:Distriburion Manager:Scheduler reply: 6\-CPU_Emulation\-8\-0\-Distro2\-lookbusy\-cpu: 10 Duration: 10.0sec.Start Time: 2013\-04\-10 09:43:01 End Time: 09:43:11
INFO:Distriburion Manager:Scheduler reply: 6\-CPU_Emulation\-8\-1\-Distro2\-lookbusy\-cpu: 50 Duration: 10.0sec.Start Time: 2013\-04\-10 09:43:13 End Time: 09:43:23
INFO:Distriburion Manager:Scheduler reply: 6\-CPU_Emulation\-8\-2\-Distro2\-lookbusy\-cpu: 90 Duration: 10.0sec.Start Time: 2013\-04\-10 09:43:25 End Time: 09:43:35
INFO:Emulation Manager:##Emulation 6\-Emu\-CPU\-RAM\-IO created
INFO:Emulation Manager:Started logger:6\-CPU_Emulation\-logger interval\-3sec.StartTime:2013\-04\-10 09:42:56
6\-Emu\-CPU\-RAM\-IO
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Each line from \fI3\-8\fP shows information of a single scheduled emulation job. Each line provides job\(aqs information, for example line \fI3\fP:
.INDENT 0.0
.IP \(bu 2
\fBINFO:Distriburion Manager:Scheduler reply:\fP \-just a generic logger part
.IP \(bu 2
\fB6\-CPU_Emulation\fP \- emulation name, which is a combined string of emulation ID from the DB and \fBemuname\fP value in the XML file
.IP \(bu 2
\fB7\fP \- database ID number for distribution
.IP \(bu 2
\fB0\fP \- run number of this distribution
.IP \(bu 2
\fBDistro1\fP \- name of the distribution taken from XML file
.IP \(bu 2
\fBlookbusy\fP \- distribution module used to calculate each run parameters
.IP \(bu 2
\fBcpu\fP \- the target resource used by this run
.IP \(bu 2
\fB90\fP \- stress value applied to this run
.IP \(bu 2
\fBDuration 10.0sec.\fP \- how long the job run
.IP \(bu 2
\fBStart Time: 2013\-04\-10 09:43:01 End Time: 09:43:11\fP \- time interval when the run is/was executed
.UNINDENT
.sp
More generally, the run/job notation is as follow:
.sp
\fB(logger reply) \- (emulationID\-name) \- (distribution ID) \- (run number} \- (distribution name) \- (distribution module) \- (resource) \- (stress value) \- (run duration) \- (execution time)\fP
.sp
Line \fI10\fP shows another job which was created for the logger. This job appears only if the optional \fIlog\fP section is stated in the XML. The logger job executes for the duration of the whole emulation and collects system resource usage information. The logger job name notation can be described in this way:
.sp
\fB(logger reply) \- (emulationID\-name) \- (logger mark) \- {poll interval} \- (start time)\fP
.SS Creating Emulation via API Client (Restfully)
.sp
This sections provides examples on how to use the REST API via the \fI\%restfully\fP client.
.sp
First you need to create a configuration file for restfully \fBapi.cocoma.yml\fP, containing the public IP address of COCOMA:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
uri: http://131.254.204.223/
require: [ApplicationVndBonfireXml]
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The example below creates an emulation with two distributions over the MEM resource. The file can be saved as a .rb and used by restfully. It contains the XML payload for COCOMA and a reference to the config file to connect to the COCOMA VM:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
require \(aqrubygems\(aq
require \(aqrestfully\(aq
require \(aqlogger\(aq

session = Restfully::Session.new(
 :configuration_file => "~/api.cocoma.yml"

)

session.logger.level = Logger::INFO

emulation = nil

begin
 emulation = session.root.emulations.submit(
   :emuname => "MEM\-emulation",
   :emutype => "Contention",
   :emuresourceType => "RAM",
   :emustartTime => "now",
   :emustopTime => "240",
   :distributions =>[{
         :name => "MEM\-increase",
            :startTime =>"0",
            :duration =>"120",
            :granularity =>"10",
            :distribution => {
                                :href => "/distributions/linear_incr",
                                :name => "linear_incr"},
            :startLoad => "10%",
            :stopLoad => "80%",
            :emulator =>{
            :href => "/emulators/stressapptest",
            :name => "stressapptest"},
            :\(aqemulator\-params\(aq =>{
                                :resourceType =>"MEM",
                                :memThreads => "1"}
      },
             {
                        :name => "MEM\-decrease",
                        :startTime =>"121",
                        :duration =>"119",
                        :granularity =>"10",
                        :distribution => {
                                :href => "/distributions/linear_incr",
                                :name => "linear_incr"},
                        :startLoad => "80%",
                        :stopLoad => "10%",
                        :emulator =>{
                                :href => "/emulators/stressapptest",
                                :name => "stressapptest"},
                        :\(aqemulator\-params\(aq =>{
                                :resourceType =>"MEM",
                                :memThreads => "1"}
                        }]
 )

end
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The script can be executed as:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ restfully emulation.rb
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
You can access the COCOMA VM interactively thorugh the \fBrestfully\fP client, and check if the emulation was created successfully:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ restfully \-c cocoma.yml

>> pp root.emulations
>> #<Collection:0x45f9f3e uri="/emulations"
>>  RELATIONSHIPS
>>    parent, self
>>  ITEMS (0..2)/2
>>    #<Resource:0x45b5d3e name="7\-CPU_Stress" uri="/emulations/7\-CPUStress">
>>    #<Resource:0x4489eb0 name="8\-MEM\-emulation" uri="/emulations/8\-MEM\-emulation">>
>> => nil
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To get more client tutorials check the \fI\%restfully\fP page.
.SS XML Examples
.sp
This section provides XML payload examples for creating different emulations over various resources.
.SS CPU
.sp
Emulation XML for CPU contention:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<emulation>
  <emuname>CPU_EMU</emuname>
  <emuType>Mix</emuType>
  <emuresourceType>CPU</emuresourceType>
  <!\-\-date format: 2014\-10\-10T10:10:10 \-\->
  <emustartTime>now</emustartTime>
  <!\-\-duration in seconds \-\->
  <emustopTime>120</emustopTime>

  <distributions>
   <name>CPU_Distro</name>
     <startTime>0</startTime>
     <!\-\-duration in seconds \-\->
     <duration>120</duration>
     <granularity>24</granularity>
     <distribution href="/distributions/linear" name="linear" />
     <!\-\-cpu utilization distribution range\-\->
      <startLoad>10</startLoad>
      <stopLoad>95</stopLoad>
      <emulator href="/emulators/lookbusy" name="lookbusy" />

      <emulator\-params>
        <!\-\-more parameters will be added \-\->
        <resourceType>CPU</resourceType>
       <!\-\-Number of CPUs to keep busy (default: autodetected)\-\->
       <ncpus>1</ncpus>
      </emulator\-params>
  </distributions>

  <log>
   <!\-\- Use value "1" to enable logging(by default logging is off)  \-\->
   <enable>1</enable>
   <!\-\- Use seconds for setting probe intervals(if logging is enabled default is 3sec)  \-\->
   <frequency>1</frequency>
   <logLevel>debug</logLevel>
  </log>

</emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.SS I/O
.sp
Emulation XML for I/O contention:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<emulation>
  <emuname>IO_EMU</emuname>
  <emuType>Mix</emuType>
  <emuresourceType>IO</emuresourceType>
  <!\-\-date format: 2014\-10\-10T10:10:10 \-\->
  <emustartTime>now</emustartTime>
  <!\-\-duration in seconds \-\->
  <emustopTime>60</emustopTime>

  <distributions>

   <name>IO_Distro</name>
     <startTime>0</startTime>
     <!\-\-duration in seconds \-\->
     <duration>60</duration>
     <granularity>5</granularity>
     <distribution href="/distributions/linear_incr" name="linear_incr" />
      <startLoad>1</startLoad>
      <stopLoad>10</stopLoad>
      <emulator href="/emulators/stressapptest" name="stressapptest" />

      <emulator\-params>
        <!\-\-more parameters will be added \-\->
        <resourceType>IO</resourceType>
       <!\-\-Size of mem in MB used\-\->
       <memsize>1000</memsize>
       <!\-\-Number of threads\-\->
       <memThreads>10</memThreads>
      </emulator\-params>

  </distributions>

  <log>
   <!\-\- Use value "1" to enable logging(by default logging is off)  \-\->
   <enable>1</enable>
   <!\-\- Use seconds for setting probe intervals(if logging is enabled default is 3sec)  \-\->
   <frequency>3</frequency>
   <logLevel>debug</logLevel>
  </log>

</emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
In this example we use a different distribution called \fItrapezoidal\fP:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<emulation>
  <emuname>IO_EMU</emuname>
  <emuType>Mix</emuType>
  <emuresourceType>IO</emuresourceType>
  <!\-\-date format: 2014\-10\-10T10:10:10 \-\->
  <emustartTime>now</emustartTime>
  <!\-\-duration in seconds \-\->
  <emustopTime>60</emustopTime>

  <distributions>

   <name>IO_Distro</name>
     <startTime>0</startTime>
     <!\-\-duration in seconds \-\->
     <duration>60</duration>
     <granularity>5</granularity>
     <distribution href="/distributions/trapezoidal" name="trapezoidal" />
      <startLoad>1</startLoad>
      <stopLoad>10</stopLoad>
      <emulator href="/emulators/stressapptest" name="stressapptest" />

      <emulator\-params>
        <!\-\-more parameters will be added \-\->
        <resourceType>IO</resourceType>
       <!\-\-Size of mem in MB used\-\->
       <memsize>1000</memsize>
       <!\-\-Number of threads\-\->
       <memThreads>10</memThreads>
      </emulator\-params>

  </distributions>

  <log>
   <!\-\- Use value "1" to enable logging(by default logging is off)  \-\->
   <enable>1</enable>
   <!\-\- Use seconds for setting probe intervals(if logging is enabled default is 3sec)  \-\->
   <frequency>3</frequency>
   <logLevel>debug</logLevel>
  </log>

</emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Memory
.sp
Emulation XML for memory contention:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<emulation>
  <emuname>MEM_EMU</emuname>
  <emuType>Mix</emuType>
  <emuresourceType>MEM</emuresourceType>
  <!\-\-date format: 2014\-10\-10T10:10:10 \-\->
  <emustartTime>now</emustartTime>
  <!\-\-duration in seconds \-\->
  <emustopTime>60</emustopTime>

  <distributions >
     <name>MEM_Distro</name>
     <startTime>0</startTime>
     <!\-\-duration in seconds \-\->
     <duration>60</duration>
     <granularity>5</granularity>
     <distribution href="/distributions/linear_incr" name="linear_incr" />
     <!\-\-Megabytes for memory \-\->
      <startLoad>100</startLoad>
      <stopLoad>1000</stopLoad>
              <malloclimit>4095</malloclimit>
      <emulator href="/emulators/stressapptest" name="stressapptest" />
      <emulator\-params>
                     <resourceType>MEM</resourceType>
                     <memThreads>0</memThreads>
      </emulator\-params>
  </distributions>

  <log>
   <!\-\- Use value "1" to enable logging(by default logging is off)  \-\->
   <enable>1</enable>
   <!\-\- Use seconds for setting probe intervals(if logging is enabled default is 3sec)  \-\->
   <frequency>3</frequency>
   <logLevel>debug</logLevel>
  </log>

</emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Example for memory emulation using \fItrapezoidal\fP distribution:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<emulation>
  <emuname>MEM_EMU</emuname>
  <emuType>Mix</emuType>
  <emuresourceType>MEM</emuresourceType>
  <!\-\-date format: 2014\-10\-10T10:10:10 \-\->
  <emustartTime>now</emustartTime>
  <!\-\-duration in seconds \-\->
  <emustopTime>60</emustopTime>

  <distributions >
     <name>MEM_Distro</name>
     <startTime>0</startTime>
     <!\-\-duration in seconds \-\->
     <duration>60</duration>
     <granularity>5</granularity>
     <distribution href="/distributions/trapezoidal" name="trapezoidal" />
     <!\-\-Megabytes for memory \-\->
      <startLoad>100</startLoad>
      <stopLoad>1000</stopLoad>
      <malloclimit>4095</malloclimit>
      <emulator href="/emulators/stressapptest" name="stressapptest" />
      <emulator\-params>
                     <resourceType>MEM</resourceType>
                     <memThreads>0</memThreads>
      </emulator\-params>
  </distributions>

  <log>
   <!\-\- Use value "1" to enable logging(by default logging is off)  \-\->
   <enable>0</enable>
   <!\-\- Use seconds for setting probe intervals(if logging is enabled default is 3sec)  \-\->
   <frequency>3</frequency>
   <logLevel>debug</logLevel>
  </log>

</emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Network
.sp
The newtork emulation needs two COCOMA VM\(aqs, one that acts as a client and the other as a server. Normally those two VMs are placed in different nodes. The SuT should be composed of at least two VMs placed on the same two nodes of COCOMA. The emulation XML for network contention looks like:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
<emulation>
  <emuname>NET_emu</emuname>
  <emuType>Mix</emuType>
  <emuresourceType>NET</emuresourceType>
  <!\-\-2014\-02\-02T10:10:10\-\->
  <emustartTime>now</emustartTime>
  <!\-\-duration in seconds \-\->
  <emustopTime>155</emustopTime>

  <distributions>
   <name>NET_distro</name>
     <startTime>0</startTime>
     <!\-\-duration in seconds \-\->
     <duration>150</duration>
     <granularity>10</granularity>
     <distribution href="/distributions/linear_incr" name="linear_incr" />
   <!\-\-cpu utilization distribution range\-\->
      <startLoad>100</startLoad>
      <!\-\- set target bandwidth to bits per sec \-\->
      <stopLoad>1000</stopLoad>
      <emulator href="/emulators/iperf" name="iperf" />
    <emulator\-params>
        <resourceType>NET</resourceType>
        <serverip>172.18.254.234</serverip>
                <!\-\-Leave "0" for default 5001 port \-\->
                <serverport>5001</serverport>
                <clientip>172.18.254.236</clientip>
                <clientport>5001</clientport>
                <packettype>UDP</packettype>
                </emulator\-params>
  </distributions>

  <log>
   <!\-\- Use value "1" to enable logging(by default logging is off)  \-\->
   <enable>0</enable>
   <!\-\- Use seconds for setting probe intervals(if logging is enabled default is 3sec)  \-\->
   <frequency>3</frequency>
  </log>

</emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Multiple distributions emulation
.sp
A good feature of COCOMA is the ability to combine multiple distributions within the same emulation. This allows to specify contention properties for multiple resources or create different patterns for the same resource. Distributions can overlap, meaning two distributions can run at the same time frame. If distributions for the same resource overlap and they exceed the available resources, the runs might crash.
.INDENT 0.0
.IP \(bu 2
CPU and Memory example
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
       <emulation>
           <emuname>CPU_and_Mem</emuname>
           <emutype>Mix</emutype>
           <emuresourceType>CPU</emuresourceType>
           <emustartTime>now</emustartTime>
           <!\-\-duration in seconds \-\->
           <emustopTime>80</emustopTime>

           <distributions>
            <name>CPU_distro</name>
            <startTime>0</startTime>
            <!\-\-duration in seconds \-\->
            <duration>60</duration>
            <granularity>1</granularity>
            <distribution href="/distributions/linear" name="linear" />
            <!\-\-cpu utilization distribution range\-\->
            <startLoad>10</startLoad>
            <stopLoad>95</stopLoad>
            <emulator href="/emulators/lookbusy" name="lookbusy" />
            <emulator\-params>
                 <!\-\-more parameters will be added \-\->
                 <resourceType>CPU</resourceType>
                 <!\-\-Number of CPUs to keep busy (default: autodetected)\-\->
                 <ncpus>0</ncpus>
            </emulator\-params>
          </distributions>

           <distributions >
              <name>MEM_Distro</name>
              <startTime>20</startTime>
              <!\-\-duration in seconds \-\->
              <duration>60</duration>
              <granularity>5</granularity>
              <distribution href="/distributions/linear_incr" name="linear_incr" />
              <!\-\-Megabytes for memory \-\->
               <startLoad>100</startLoad>
               <stopLoad>1000</stopLoad>
               <malloclimit>4095</malloclimit>
                               <emulator href="/emulators/stressapptest" name="stressapptest" />
                               <emulator\-params>
                                     <resourceType>MEM</resourceType>
                                     <memThreads>0</memThreads>
                               </emulator\-params>
           </distributions>

          <log>
            <!\-\- Use value "1" to enable logging(by default logging is off)  \-\->
            <enable>1</enable>
            <!\-\- Use seconds for setting probe intervals(if logging is enabled default is 3sec)  \-\->
            <frequency>3</frequency>
          </log>
       </emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.INDENT 0.0
.IP \(bu 2
CPU, MEM and IO example
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
       <emulation>
           <emuname>CPU_and_Mem</emuname>
           <emutype>Mix</emutype>
           <emuresourceType>CPU</emuresourceType>
           <emustartTime>now</emustartTime>
           <!\-\-duration in seconds \-\->
           <emustopTime>80</emustopTime>

           <distributions>
            <name>CPU_distro</name>
            <startTime>0</startTime>
            <!\-\-duration in seconds \-\->
            <duration>60</duration>
            <granularity>1</granularity>
            <distribution href="/distributions/linear" name="linear" />
            <!\-\-cpu utilization distribution range\-\->
            <startLoad>10</startLoad>
            <stopLoad>95</stopLoad>
            <emulator href="/emulators/lookbusy" name="lookbusy" />
            <emulator\-params>
                 <!\-\-more parameters will be added \-\->
                 <resourceType>CPU</resourceType>
                 <!\-\-Number of CPUs to keep busy (default: autodetected)\-\->
                 <ncpus>0</ncpus>
            </emulator\-params>
          </distributions>

           <distributions >
              <name>MEM_Distro</name>
              <startTime>20</startTime>
              <!\-\-duration in seconds \-\->
              <duration>60</duration>
              <granularity>5</granularity>
              <distribution href="/distributions/linear_incr" name="linear_incr" />
              <!\-\-Megabytes for memory \-\->
               <startLoad>100</startLoad>
               <stopLoad>1000</stopLoad>
               <malloclimit>4095</malloclimit>
                               <emulator href="/emulators/stressapptest" name="stressapptest" />
                               <emulator\-params>
                                     <resourceType>MEM</resourceType>
                                     <memThreads>0</memThreads>
                               </emulator\-params>
           </distributions>

           <distributions>
            <name>IO_Distro</name>
              <startTime>0</startTime>
              <!\-\-duration in seconds \-\->
              <duration>60</duration>
              <granularity>5</granularity>
              <distribution href="/distributions/linear_incr" name="linear_incr" />
               <startLoad>1</startLoad>
               <stopLoad>10</stopLoad>
               <emulator href="/emulators/lookbusy" name="lookbusy" />

               <emulator\-params>
                 <!\-\-more parameters will be added \-\->
                 <resourceType>IO</resourceType>
                <!\-\-Size of blocks to use for I/O, in MB\-\->
                <ioBlockSize>10</ioBlockSize>
                <!\-\-Time to sleep between iterations, in msec\-\->
                <ioSleep>100</ioSleep>
               </emulator\-params>
            </distributions>

          <log>
            <!\-\- Use value "1" to enable logging(by default logging is off)  \-\->
            <enable>1</enable>
            <!\-\- Use seconds for setting probe intervals(if logging is enabled default is 3sec)  \-\->
            <frequency>3</frequency>
          </log>
       </emulation>
.ft P
.fi
.UNINDENT
.UNINDENT
.SH INDICES AND TABLES
.INDENT 0.0
.IP \(bu 2
\fIgenindex\fP
.UNINDENT
.INDENT 0.0
.IP \(bu 2
\fI\%Glossary\fP
.UNINDENT
.SH AUTHOR
Carmelo Ragusa, Philip Robinson, Sergej Svorobej
.SH COPYRIGHT
2012-2013, SAP
.\" Generated by docutils manpage writer.
.
